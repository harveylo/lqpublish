- # SQL简介
	- 全程**结构化查询语言(Structured Query Language)**
	- SQL有**ANSI标准**，各家在实际实现上可能会有偏差(主要体现在各家都对指令做了一些**扩展**)，但是整体来说必须支持一些主要命令
	- ANSI标准的SQL应该是在所有数据库上都是通用的
	- SQL语言实际上是几种**数据操作语言**的集合
		- **DDL(Data Definition Language)**，即创建，删除，修改**表结构**。一般由数据库管理员执行
		- **DML(Data Manipulation Language)**，即添加，删除，更新**数据**。应用程序对数据库的日常操作
		- **DQL(Data Query Language)**，即查询数据。也是最为频繁的日常操作
	- **SQL[[$red]]==关键字不区分大小写==**
		- 对于表名，和列名，最好在使用前通过手册或其他手段具体确定是否支持区分大小写
- # 关系模型相关概念
	- ## 主键
		- 能够区分某个表中两个不同记录之间的字段，换言之，此字段**[[$red]]==不允许重复==**
		- 选取主键的一个基本原则是：**不使用[[$red]]==业务相关数据==做主键**，例如在一张存储联系人的表中，不要使用身份证号作为主键
		- 因此主键最好**[[$red]]==完全业务无关==**，一般某个表中都会有一个专门的ID字段
			- **自增整数类型**，数据库会在自动插入数据时为每一跳记录分配一个自增整数，不用担心主键重复
				- 922亿亿条若使用``INT``类型，记录数超过2147483647时会出错，``BIGINT``的上限则为
			- **全局唯一GUID**类型， 使用一种**全局唯一的字符串**作为主键，可通过MAC地址，时间戳和随机数等来生成以保证唯一性
				- 大部分编程语言内置GUID算法，可以自己算出主键
		- ###  联合主键
			- 将多个字段均设为主键，在此情况下只要不是所有字段都重复，则都可以新增记录
	- ## 外键约束
		- 某张表中的某一列存储着另外一张表的主键，这一列就是此表的外键
		- 在数据库中可以定义外键约束，外键约束可以避免插入无效数据
		- ```sql
		  ALTER TABLE students
		  ADD CONSTRAINT fk_class_id
		  FOREIGN KEY (class_id)
		  REFERENCES classes (id);
		  ```
			- 以上代码在``students``表上添加了一个名为`fk_class_id`的约束
			- 此约束声明了列``class_id``是外键，关联``classes``表的列``id``
		- [[$red]]==**注意：**==外键约束会**[[$red]]==降低数据库性能==**，为了追求性能可能会并不设置外键约束而是依靠应用程序逻辑保证插入数据的有效性
		- 删除外键约束可使用：
			- ```sql
			  ALTER TABLE students
			  DROP FOREIGN KEY fk_class_id;
			  ```
		- **多对多关系需要使用额外的关系表实现**
	- ## 索引
		- 建立索引可以对某鱼i列或多个列的只进行预排序，在查询时可以避免扫描整张表以提升效率
		- 建立索引可以通过以下指令完成：
			- ```sql
			  ALTER TABLE students
			  ADD INDEX idx_score (score);
			  ```
			- 以上代码在``student``表的``score``列上建立了名为``idx_score``的索引
		- 多列索引只需要增添列：
			- ```sql
			  ALTER TABLE students
			  ADD INDEX idx_name_score (name, score);
			  ```
		- 索引要率取决于**散列程度**，即该列的值越互不相同，索引效率就越高
		- 可以对一张表建立多个索引，提升查询效率，但由于更新，插入，删除操作都需要修改索引，所以索引越多，修改操作的速度就越慢
		- 数据库会自动对主键创建索引([[$red]]==**?**==)，使用主键查询效率最高，因为不存在重复
		- ### 唯一索引
			- 对于具有唯一性但并为作为主键使用的**业务数据**，如身份证号，可谓这些列添加**唯一索引**
			- ```sql
			  ALTER TABLE students
			  ADD UNIQUE INDEX uni_name (name);
			  ```
			- 也可只添加**唯一约束**而不创建索引
			- ```sql
			  ALTER TABLE students
			  ADD CONSTRAINT uni_name UNIQUE (name);
			  ```
			-
- # 数据类型
	- | 名称 | 类型 | 说明 |
	  | ---- | ---- | ---- |
	  | INT | 整型 | 4字节整数类型，范围约+/-21亿 |
	  | BIGINT | 长整型 | 8字节整数类型，范围约+/-922亿亿 |
	  | REAL | 浮点型 | 4字节浮点数，范围约+/-1038 |
	  | DOUBLE | 浮点型 | 8字节浮点数，范围约+/-10308，等价于FLOAT(24) |
	  | DECIMAL(M,N) | 高精度小数 | 由用户指定精度的小数，例如，DECIMAL(20,10)表示一共20位，其中小数10位，通常用于财务计算 |
	  | CHAR(N) | 定长字符串 | 存储指定长度的字符串，例如，CHAR(100)总是存储100个字符的字符串 |
	  | VARCHAR(N) | 变长字符串 | 存储可变长度的字符串，例如，VARCHAR(100)可以存储0~100个字符的字符串 |
	  | BOOLEAN | 布尔类型 | 存储True或者False |
	  | DATE | 日期类型 | 存储日期，例如，2018-06-22 |
	  | TIME | 时间类型 | 存储时间，例如，12:20:59 |
	  | DATETIME | 日期和时间类型 | 存储日期+时间，例如，2018-06-22 12:20:59 |
	- 一般来说，``BIGINT``足以满足整数存储需求，``VARCHAR(N)``能满足字符串存储需求
	- 还有一些不常用数据类型，例如(``TINYINT``)，各数据库厂商可能会增添对于特定数据类型的支持，例如``JSON``
- # [[SQL查询语句]]
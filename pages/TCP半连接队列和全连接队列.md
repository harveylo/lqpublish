# TCP的半连接和全连接队列
	- 指Linux内核为TCP链接维护的两个用于三次握手的队列
	- **半连接队列**，也称**SYN队列**
		- 服务端收到客户端发起连接的SYN包之后，会将此连接放入**半连接队列**，并向客户端发送SYN+ACK包
	- **全连接队列**，也称**accept**队列
		- 收到客户端的第三次握手ACK包之后，内核会把此连接从半连接队列中移除，然后**创建新的完全连接**，并将其添加到**全连接队列**，等待进程调用``accept``函数将连接取出
	- ![image.png](../assets/image_1696838618108_0.png)
	- 两个队列**[[$red]]==都有最大长度限制==**，如果超过限制时还有新的连接试图入队，内核会**丢弃此连接并返回RST包**
- # 队列溢出情况的内核行为
	- ## TCP全连接队列溢出
		- 可以使用``ss``命令查看所有连接的状态
		- 其``Recv-Q``和``Send-Q``两列的含义根据连接状态有所不同
			- 对于处于LISTEN状态的连接：
				- `Recv-Q`表示目前全连接队列的大小
				- `Send-Q`表示当前全连接队列的最大长度
			- 对于处于非LISTEN状态的连接：
				- `Recv-Q`表示已收到但未被应用进程读取的字节数
				- `Send-Q`表示已发送但未被确认的字节数
			-
	-
- 从上到下分为四层：应用层(Application)，传输层(Transport)，网络侧(Network)，链路层(Link)
- 每一层都有自己的责任，每一层都为上层构建服务
- 最终到顶层时，应用能拥有一个稳定的双向字节流
- # 链路层
	- 在网络中，数据被分为各个包(packet)，一跳(hop)一跳地传播
	- 链路层便负责在一个链路上传输一次数据
	- 以太网和wifi都是链路层地协议
	- 只负责数据传输，其他什么都不管
	- 和物理实现息息相关
- # 网络层
	- 负责将数据地端到端递送(但不是起点到终点的端到端，而是指每一个经手数据报的终端)
	- 负责数据的路由
	- 网络层的包叫做**数据报(datagram)**
		- 包含from和to的相关信息
	- 网络层会把需要发送的数据传递给链路层协议，链路层协议负责将数据报通过链路传递
	- 当链路层收到数据之后会交给网络层处理，由网络层负责数据的路由和其他处理
	- 网络层是很**“特殊”**的，特殊性很大程度上来源于其使用的协议
		- 典型的网络层协议：**IP(Internet protocol)**
		- IP协议支撑起了整个互联网
		- **IP协议的两大特性**
			- 会尽力去递送数据报到另一端，但是**不做任何承诺**
			- IP数据报可能会丢失，可能会被乱序送达，可能会被破坏。对于数据没有任何保证
- # 传输层
	- 正因为网络层对于数据几乎不能给出任何保证，需要在其基础上再增加一层来完成，便是传输层
	- 最常使用的传输层协议是TCP(Transmission control protocol)
	- TCP的工作是确保一方发送的数据能通过英特网以正确的顺序正确递送到另一方
		- 如果网络层有数据报丢失，TCP会在需要的情况下重传数次
		- 如果网络层传递的数据错位到达，TCP会负责重新以正确的顺序地送给应用层
		- 总而言之，TCP向应用层提供了正确有序的数据递送服务
	- 但是并不是所有场景都需要使用到TCP提供的可靠和有序的特性，且这些特性的实现可定伴随着性能损耗
	- 因此对于那些不需要可靠和有序传输的应用，它们可以选择的UDP(User Datagram protocol)
		- UDP不提供传输保证
- # 应用层
	- 应用层希望能够通过网络进行双向可靠字节流传输
	- 每一层协议都之和同级(peer)沟通，而不关心下一层的细节，只是通过下层提供的API和同级通信
- # 四层模型总结
	- ## 应用层
		- 两个应用之间的双向可靠字节流
		- application-specific semantics
	- ## 传输层
		- 保证正确，有序的端到端传输
		- 用拥塞控制
	- ## 网络层
		- 端到端传输数据报
		- 尽最大努力去传输，但是没有保证
		- 必须使用IP协议
	- ## 链路层
		- 只使用某一条链路(网络层可以选择不同链路)
		- 只负责一次主机到路由器或路由器之间的传输
- # Extras
	- ## IP是英特网的“细腰(Thin waist)”
		- 如果想使用英特网，则必须使用IP协议(作为网络层协议)
		- 然而其他层往往都拥有很多的选择
	- ## 七层OSI(Open system interconnection)模型
		- 七层：
			- 应用层
			- 表示层(presentation)
			- 会话层(Session)
			- 传输层(Transport)
			- 网络层
			- 链路层
			- 物理层(Physical)
		- 并没有实际投入使用，所以没有必要投入过多精力
		- 唯一的遗产可能是层数的编号，例如网络层常被叫做第三层(layer 3)，以太网协议被称作第二层协议，应用层协议被叫做第七层协议
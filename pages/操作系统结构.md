- # 内核
	- 某种程度上来说，内核可以看作硬件和应用程序之间的一层抽象层
	- 现代操作系统，内核一般会提供四个基本能力：
		- 进程调度
		- 内存管理
		- 硬件通信能力
		- 提供系统调用
	- ## Linux的设计
		- Linux内核设计理念
			- **多任务**(MultiTask)
				- 意味着多个任务可以同时被处理，并发(Concurrent)或并行(Parallel)
			- **对称多处理**(Symmetric multiprocessing, SMP)
				- 每个CPU核心的地位相等，对资源的使用权限是相同的
				- 多个CPU核心共享同一个内存，每个CPU都可以访问完整的内存和硬件资源
			- **兼容ELF**(Executable and Linkable Format)
				- [[ELF文件格式和链接过程简介]]
			- **宏内核**(monolithic kernel)
				- 意味着linux内核是一个完整的可执行程序，并在内核态执行
				- 与之相对的是**微内核(micro kernel)**和**混合内核(hybrid kernel)**
				- 宏内核的特征是**系统内核的所有模块，例如进程调度，内存管理，文件系统，设备驱动等都运行在内核态**
				- 但是linux也提供**动态加载内核模块的功能**，例如大部分设备驱动都是可加载模块，与其他内核模块解耦，更加方便灵活
	- ## 微内核和混合内核
		- ![宏内核、微内核、混合内核的操作系统结构](https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost4@main/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%86%85%E6%A0%B8/OS-structure2.png){:height 202, :width 729}
		- **微内核**
			- 内核**只保留最基本的功能**，例如进程调度，虚拟机内存，中断等
			- 驱动程序，文件系统等被放到了用户空间
			- 服务与服务之间是隔离的，单个服务出现故障不会影响其他服务，未定型和可靠性高
			- 功能少，可以执行高
			- [[$red]]==缺点==在于，不在内核态中的驱动程序会带来性能损耗
		- **混合内核**
			- 内核中会有一个最小版本内核，其他模块在内核基础上搭建服务，但是与微内核不同的是跑在内核态
	- ## Windows设计
		- windows的内核为**Windows NT**(New Technology)
		- ![Windows NT 的结构](https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost4@main/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%86%85%E6%A0%B8/windowNT.png){:height 588, :width 459}
		- 支持MultiTask和SMP
		- 采用**混合内核设计**
			- 图中的[[$red]]==**Micro Kernel**==就是最小内核
			- 整个内核是一个完整程序，含有非常多的模块
		- 支持的可执行文件格式为**[[$red]]==PE==**(Portable Executable)
			- 扩展名通常为``.exe``，``.dll``，``.sys``等
			- ![PE 文件结构](https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost4@main/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%86%85%E6%A0%B8/pe.png)
		-
- hub(home controllers)
  collapsed:: true
	- a gateway between IOT devices and cloud services
	- connect to internet with multiple protocols
		- ZigBee
		- Z-Wave
		- WIFI
		- BLE
	- has it own computation capability to execute some functionality locally without connection to the cloud backend
		- it can go offline but once the connection restored, the events are needed to upload to the cloud to reflect the states of home.
	- communication are encrypted by SSL/TLS protocol.
- buddy app
  collapsed:: true
	- third party: **SmartApps**
	- first party: smartthings
	- third parties can develop their own customized applications adding more options and fuctionality.
	- Three classes of app
		- Event handler
			- subscribe to events and call handler methods upon their firing
		- solution modules
			- a container  for the two other categories of smart apps
			- simplify the management of certain physical area
		- service managers
			- integrated with smart devices
			- should be installed by end users
- Smart devices
  collapsed:: true
	- has the ability to connect with wifi or ip
	- 3 classes
		- hub-connected
			- include all devices that have the capability to interact with smartthings hub
			- using Zigbee or Z-wave home automation protocols.
		- LAN-connected
			- have extra feature of connection via wifi
		- cloud-connected
			- connect to cloud directly using http, and authenticate themselves using OAuth protocol.
	- Both LAN and cloud connected devices are able to communicate and integrate via web services.
		- like REST or SOAP
- Two ways of communication between smartApps and smartdevices
  collapsed:: true
	- method call
		- smartapps can execute and perform operations over smartdevices
	- Event-subscription
		- smartapps can subscribe to events generated by other smartapps or smartdevices
- Smartthings cloud
	- connectivity management
		- maintain the persistent and secure connection between the devices(like hub) and cloud services.
	- devices type handler
		- maintain an instance for each type of smartdevices.
		- end-user interact with the physical smartdevices indirectly via instances
	- Subscription Processing
		- event manager
		- routing events from hubs/devices to smartapps that subscribed to a specific smartdevices/event
	- smartApp management & execution layer
		- provide access rights to the stored data
		- trigger the smartapps' execution when subscription events or external calls arrive
	- Web ui
		- provide web services and APIs to supporting the integration with third party applications
	- Two functionality
		- host and run smartapps
		- run virtual software image of the physical smartdevices
- Smart application specification
	- SmartThings has offered a web-based IDE to develop SmartApps using Groovy language
	- a smartApps is composed of 5 sections
		- definition
			- metadata
				- application name
				- author
				- e.g.
		- preferences
			- define target group of devices
			- specify their capability and information
		- predefined callbacks
			- methods already defined and automatically called upon meeting some conditions
		- event handlers
			- contain handler methods for various event
		- mappings
			- optional, only required for cloud-connected smartapps
- Hardware specification
	- the devices that using any of the compatible devices
- Security features
	- specify the services and smartdevices a smartapp can use.
	- **authentication**
		- use OAuth/OAuth2 protocol to integrate a new smartdevice into a smartthings environment and authorize the platform to access its capabilities.
		- for cloud and lan connected devices,
			- they need to identify a custom _service manager_  and a _device handler_ for establishing connections, handling authentication, granting authorization, and maintaining communication
			- the service manager does:
				- handle authentication with 3ed party cloud service
				- device discovery
				- initiate connection using oauth protocol
				- control smartdevice actions
			- device handler does:
				- parse messages being sent or received by corresponding smartdevice
		- many factors can contribute to the identification
			- serial number
			- MAC address
			- unique ip address
			- .....
	- **authorization and access control**
		- The smartthings capability model
			- a capability is the abstraction of a smartdevice's capability
			- a capability is composed of a set of commands
			- a smartdevices also has some attributes representing its status
		- Each app should ask the permission before using a capability of a devices
		- All smartapps run on smartthings cloud or smartthings hub
		- SmartApps and smartdevices are isolated by using kohsuke sandboxing technics
	- **Secure communication**
		- smartthings hub is a security-enabled Z-wave products
		- when another security-enabled devices is added in the network, communication will be encrypted by 128-bitAES..
		- ZigBee enabled devices have the same security guarantees.
		- communication between all building blocks of the smartthings ecosystem is performed over a SSL/TLS protocol.
		-
- DONE 把这一课的第一部分听完
- DONE 完成作业0（配环境）
- **变换**就是一种函数，在线代上，指输入一个向量并且输出一个向量的函数
- 对向量的变换可以看作平面的变换
- **线性变换**是满足以下两点的变换：
	- 直线依旧是直线，不能弯曲
	- 原点保持固定
- 总的来说，线性变换可以看作是保持网格线平行且等距分布的变换
- 可以进行旋转，缩放，翻转等操作
- 所有线性变换都可以用一个转换矩阵来表达
- # 线性变换
  collapsed:: true
	- ## 缩放
		- $\begin{bmatrix}x'\\y'\end{bmatrix}=\begin{bmatrix}s_x & 0\\0&s_y\end{bmatrix}\begin{bmatrix}x\\y\end{bmatrix}$
		- sx是x方向上的缩放，sy是y方向上的缩放
	- ## 翻转
		- 在哪个方向上需要翻转就在该方向上给出-1，其他方向保持1
	- ## 切变(sheer)
		- 某一个轴的变化和另一个轴有关
		- $\begin{bmatrix}x'\\y'\end{bmatrix}=\begin{bmatrix}1&a\\0&1\end{bmatrix}\begin{bmatrix}x\\y\end{bmatrix}$
		- y方向没变，x方向随着y偏移量增加
	- ## 旋转（逆时针，且绕原点）
		- $R_\theta = \begin{bmatrix}\cos \theta & - \sin \theta\\ \sin \theta & \cos \theta\end{bmatrix}$
	- ## 总结
		- 线性变换一定能被写作：$\begin{bmatrix}x'\\y'\end{bmatrix}=\begin{bmatrix}a & b\\c&d\end{bmatrix}\begin{bmatrix}x\\y\end{bmatrix}$
		- $x'=ax+cy\qquad y' = cx+dy$
- # 非线性变换
  collapsed:: true
	- **平移变换(translation)**无法用一个转换矩阵表示
	- 因此必须引入一个偏移量向量
	- 但是为了不对平移变换进行特殊处理，引入新的概念
	- ## 齐次坐标（homogeneous coordinates）
	  collapsed:: true
		- 对坐标向量加入一个新的维度
			- 对于二维的点：$(x,y,1)^T$
			- 对于二维的向量：$(x,y,0)^T$
				- 之所以向量的额外维度为0，是因为向量平移之后应该保持不变
		- 在齐次坐标下对于点的平移变换的描述：
			- $\begin{bmatrix}x'\\y'\\w'\end{bmatrix}=\begin{bmatrix}1 &0 &t_x\\0&1&t_y\\0&0&1\end{bmatrix}\begin{bmatrix}x\\y\\1\end{bmatrix}$
		- 齐次坐标下的运算与结果类型：
			- 向量+向量=向量
			- 点-点=向量
			- 点+向量=点
				- 一个点沿着一个向量移动到了新的点上
			- 点+点=两点的中点
				- 需要扩充齐次坐标的定义：
					- $\begin{pmatrix}x\\y\\w\end{pmatrix}=\begin{pmatrix}x/w\\y/w\\1\end{pmatrix},w\ne 0$
	- ## 仿射变换（affine）
	  collapsed:: true
		- **线性变换+平移变换**
		- 用齐次坐标表示为：
			- $\begin{pmatrix}x'\\y'\\1\end{pmatrix}=\begin{pmatrix}a & b &t_x\\c & d& t_y\\0& 0&1\end{pmatrix} \cdot \begin{pmatrix} x\\y\\1\end{pmatrix}$
			- 分别表示：
				- **缩放：**
					- $\begin{pmatrix}s_x & 0 &0\\0 & s_y& 0\\0& 0&1\end{pmatrix}$
				- **旋转(逆时针)**
					- $\begin{pmatrix}\cos\alpha & -\sin\alpha &0\\\sin \alpha & \cos\alpha& 0\\0& 0&1\end{pmatrix}$
				- **平移**
					- $\begin{pmatrix}1 & 0 &t_x\\0 & 1& t_y\\0& 0&1\end{pmatrix}$
				- 在仿射变换下变换矩阵的最后一行都是001
			-
- # 逆变换
	- $M^{-1}$
	- 对于旋转变换，$M^{-1}=M^T$
	- 如果一个矩阵的逆等于他的转置，那么这个矩阵叫做正交矩阵
- # 变换的合成
  collapsed:: true
	- 变换进行的顺序非常重要
	- 变换是先做最右边的
	- $A_n(\ldots A_2(A_1(x)))$
	- 想绕着某个点旋转，先把该点移动到原点，再做旋转，然后做一个平移的逆变换
- # 三维
	- 没有实质区别，增加一个维度
	- $\begin{pmatrix}x'\\y'\\z'\\1\end{pmatrix}=\begin{pmatrix}a &b&c&t_x\\d&e&f&t_y\\g&h&i&t_z\\0&0&0&1\end{pmatrix}\cdot\begin{pmatrix}x\\y\\z\\1\end{pmatrix}$
	- 这个矩阵表示的是先线性变换再平移
	- ## 三维中的旋转
		- 绕x轴旋转：
			- x坐标不变
			- $\begin{pmatrix}1 &0&0&0\\0&\cos \alpha& -\sin\alpha&0\\0&\sin\alpha&\cos\alpha&0\\0&0&0&1\end{pmatrix}$
		- 绕y轴旋转
			- $\begin{pmatrix}\cos\alpha &0&\sin\alpha&0\\0&1&0&0\\-\sin\alpha&0&\cos\alpha&0\\0&0&0&1\end{pmatrix}$
		- 绕z轴旋转
			- $\begin{pmatrix}\cos\alpha&-\sin\alpha&0&0\\\sin\alpha&\cos\alpha&0&0\\0&0&1&0\\0&0&0&1\end{pmatrix}$
		- ![Screenshot 2022-04-11 211817.png](../assets/Screenshot_2022-04-11_211817_1649683134420_0.png){:height 212, :width 277}
		- 如果任意旋转都能够分解为三个轴上的旋转，则叫做欧拉角
		- **绕任意轴旋转的公式**
			- Rodrigues‘ Rotation Formula
			- 绕n轴旋转$\alpha$角度的旋转矩阵,n轴用一个向量表示
			- $R(n,\alpha)=\cos(\alpha)I+(1-\cos(\alpha))nn^T+\sin(\alpha)\begin{pmatrix}0&-n_z&n_y\\n_z&0&-n_x\\-n_y&-nx&0\end{pmatrix}$
- # 观测（Viewing）变换
	- 如何从三维空间生成一张图片（MVP变换）？
		- 放置物品（模型转换）
		- 找好相机角度（视图变换）
		- 照相（投影变换）
	- ## 视图变换（view/camera）
		- 在做视图变换时首先需要定义一台相机
			- 相机的位置：
				- 一个向量**e**
			- 朝向
				- 一个向量**g**
			- 向上的方向
				- 一个向量**t**
		- 在实际操作中，假设相机永远处在原点，看向-z方向，y为向上的方向
			- 将其他所有物体随相机一起移动到对应位置
			- 变换过程：
				- 先平移到原点
					- $\begin{bmatrix}1&0&0&-x_3\\0&1&0&-y_e\\0&0&1&-z_e\\0&0&0&1\end{bmatrix}$
				- 将**g**旋转到**-z**
				- 将**t**旋转到**y**
				- **g**$\times$**t**对准x轴
				- 旋转时先写出将**-z**旋转到**g**，其余同理的逆旋转矩阵，然后再通过转置得到真正的旋转矩阵
					- $R_{view}^{-1}=\begin{bmatrix}x_{\hat{g}\times\hat{t}}&x_t&x_{-g}&0\\y_{\hat{g}\times\hat{t}}&y_t&y_{-g}&0\\z_{\hat{g}\times\hat{t}}&z_t&z_{-g}&0\\0&0&0&1\end{bmatrix}\Rightarrow R_{view}=\begin{bmatrix}x_{\hat{g}\times\hat{t}}&y_{\hat{g}\times\hat{t}}&z_{\hat{g}\times\hat{t}}&0\\x_t&y_t&z_t&0\\x_{-t}&y_{-g}&z_{-g}&0\\0&0&0&1\end{bmatrix}$
	- 到这一步为止，所有的操作都是作用在模型上的
	- ## 投影变换（projection）
		- ### 正交（orthographic）投影
			- 不会出现近大远小的现象
			- 步骤：
				- 把相机放到标准位置
				- 去掉z轴坐标
				- 把所有物体缩放到$[-1,1]^2$的一个小正方形上
			- 实际做法：
				- 把一个长方体的中心移动到原点，然后把长宽高都缩放到$[-1,1]$
				- 立方体的表达为在x轴上的两点据原点距离l(eft),r(ight)
				- 在y轴上为b(ottom),t(op)
				- z轴上为n(ear),f(ar)
				- ![Screenshot 2022-04-23 195225.png](../assets/Screenshot_2022-04-23_195225_1650714780813_0.png){:height 169, :width 188}
				- 先位移，再缩放：
					- $M_{ortho}=\begin{bmatrix}\frac{2}{r-l}& 0&0&0\\0&\frac{2}{t-b}&0&0\\0&0&\frac{2}{n-f}&0\\0&0&0&1\end{bmatrix}\begin{bmatrix}1&0&0&-\frac{r+l}{2}\\0&1&0&-\frac{t+b}{2}\\0&0&1&-\frac{n+f}{2}\\0&0&0&1\end{bmatrix}$
		- ### 透视（perspective）投影
			- ![Screenshot 2022-04-23 195819.png](../assets/Screenshot_2022-04-23_195819_1650715154318_0.png){:height 381, :width 678}
			- 首先把远平面缩放到和近平面一样的大小，然后做正交投影
			- 如何挤压通过相似三角形求得
				- ![Screenshot 2022-04-23 195154.png](../assets/Screenshot_2022-04-23_195154_1650714865903_0.png){:height 226, :width 500}
			- 正交(前文所提到的第一步的缩放操作)变换矩阵如下：
				- $\begin{bmatrix}n&0&0&0\\0&n&0&0\\0&0&n+f&-nf\\0&0&1&0\end{bmatrix}$
				-